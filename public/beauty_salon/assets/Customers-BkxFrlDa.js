import{r as p,j as b,l as V,c as l,a as e,m as z,F as k,p as _,d as v,t as d,w as $,e as C,f as x,v as j,n as q,q as D,o as n}from"./index-DyZsXIkH.js";const I={class:"max-w-5xl"},K={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},L={class:"overflow-x-auto"},O={class:"w-full text-left text-sm"},A={key:0},E={key:1,class:"divide-y"},F={class:"px-4 py-3 text-gray-500"},G={class:"px-4 py-3 font-medium text-gray-800"},U={class:"px-4 py-3 text-gray-600"},J={class:"px-4 py-3 text-right"},Q={class:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition"},R=["onClick"],W=["onClick"],X={key:2},Y={key:0,class:"fixed inset-0 z-[100000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},Z={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md"},ee={class:"bg-gradient-to-r from-pink-500 to-fuchsia-600 px-6 py-4"},te={class:"font-bold text-white text-lg"},se={class:"flex gap-3 pt-4"},oe=["disabled"],ae={key:1,class:"fixed inset-0 z-[100001] flex items-center justify-center p-4 bg-black/50"},ne={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md"},le={class:"p-6"},re={class:"text-center text-gray-800"},ie={class:"px-6 pb-6 flex gap-3"},de={class:"font-medium"},ce={__name:"Customers",setup(ue){const f=p([]),h=p(!0),c=p(!1),m=p(!1),g=p(!1),a=b({id:null,nama:"",no_hp:""}),r=b({show:!1,customerId:null,customerName:""}),i=b({show:!1,message:"",type:"success"});function u(o,t="success"){i.message=o,i.type=t,i.show=!0,setTimeout(()=>i.show=!1,3e3)}async function y(){h.value=!0;try{const t=await(await fetch("/api/Beauty_Salon/Customers")).json();t.success&&(f.value=t.data)}catch(o){console.error(o)}finally{h.value=!1}}function B(){m.value=!1,a.id=null,a.nama="",a.no_hp="",c.value=!0}function M(o){m.value=!0,a.id=o.id,a.nama=o.nama,a.no_hp=o.no_hp,c.value=!0}function w(){c.value=!1}async function N(){g.value=!0;try{const o=m.value?`/api/Beauty_Salon/Customers/update/${a.id}`:"/api/Beauty_Salon/Customers/create",s=await(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nama:a.nama,no_hp:a.no_hp})})).json();s.success?(u(s.message),w(),y()):u(s.message||"Gagal menyimpan","error")}catch{u("Kesalahan jaringan","error")}finally{g.value=!1}}function S(o){r.customerId=o.id,r.customerName=o.nama,r.show=!0}async function T(){const o=r.customerId;r.show=!1;try{const s=await(await fetch(`/api/Beauty_Salon/Customers/delete/${o}`,{method:"POST"})).json();s.success?(u(s.message),y()):u(s.message||"Gagal menghapus","error")}catch{u("Kesalahan jaringan","error")}}return V(()=>y()),(o,t)=>(n(),l("div",I,[e("div",K,[e("div",{class:"flex items-center justify-between mb-6"},[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Pelanggan",-1)),e("button",{onClick:B,class:"px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white rounded-lg font-medium shadow-lg transition flex items-center gap-2"},[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"Tambah Pelanggan",-1)])])]),e("div",L,[e("table",O,[t[9]||(t[9]=e("thead",{class:"bg-gradient-to-r from-fuchsia-50 to-pink-50 text-gray-700 font-semibold border-b"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Nama"),e("th",{class:"px-4 py-3"},"No HP"),e("th",{class:"px-4 py-3 text-right w-32"},"Aksi")])],-1)),h.value?(n(),l("tbody",A,[(n(),l(k,null,_(3,s=>e("tr",{key:s,class:"animate-pulse border-b"},[...t[5]||(t[5]=[e("td",{class:"px-4 py-3"},[e("div",{class:"h-4 bg-gray-200 rounded w-8"})],-1),e("td",{class:"px-4 py-3"},[e("div",{class:"h-4 bg-gray-200 rounded w-32"})],-1),e("td",{class:"px-4 py-3"},[e("div",{class:"h-4 bg-gray-200 rounded w-24"})],-1),e("td",{class:"px-4 py-3"},null,-1)])])),64))])):f.value.length?(n(),l("tbody",E,[(n(!0),l(k,null,_(f.value,(s,H)=>(n(),l("tr",{key:s.id,class:"hover:bg-fuchsia-50/30 group"},[e("td",F,d(H+1),1),e("td",G,d(s.nama),1),e("td",U,d(s.no_hp),1),e("td",J,[e("div",Q,[e("button",{onClick:P=>M(s),class:"text-blue-600 hover:text-blue-700 p-1"},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,R),e("button",{onClick:P=>S(s),class:"text-red-600 hover:text-red-700 p-1"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,W)])])]))),128))])):(n(),l("tbody",X,[...t[8]||(t[8]=[e("tr",null,[e("td",{colspan:"4",class:"px-4 py-12 text-center text-gray-400"},"Belum ada pelanggan")],-1)])]))])])]),(n(),z(D,{to:"body"},[c.value?(n(),l("div",Y,[e("div",Z,[e("div",ee,[e("h3",te,d(m.value?"Edit Pelanggan":"Tambah Pelanggan"),1)]),e("form",{onSubmit:$(N,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[x("Nama "),e("span",{class:"text-red-500"},"*")],-1)),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.nama=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none",placeholder:"Nama pelanggan"},null,512),[[j,a.nama]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[x("No HP "),e("span",{class:"text-red-500"},"*")],-1)),C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.no_hp=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none",placeholder:"08xxxxxxxxxx"},null,512),[[j,a.no_hp]])]),e("div",se,[e("button",{type:"button",onClick:w,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium"},"Batal"),e("button",{type:"submit",disabled:g.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white rounded-lg font-medium disabled:opacity-50"},d(g.value?"Menyimpan...":"Simpan"),9,oe)])],32)])])):v("",!0),r.show?(n(),l("div",ae,[e("div",ne,[t[14]||(t[14]=e("div",{class:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4"},[e("h3",{class:"font-bold text-white text-lg"},"Konfirmasi Hapus")],-1)),e("div",le,[e("p",re,[t[12]||(t[12]=x("Hapus pelanggan ",-1)),e("strong",null,d(r.customerName),1),t[13]||(t[13]=x("?",-1))])]),e("div",ie,[e("button",{onClick:t[2]||(t[2]=s=>r.show=!1),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"},"Batal"),e("button",{onClick:T,class:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg"},"Hapus")])])])):v("",!0),i.show?(n(),l("div",{key:2,class:q(["fixed top-4 right-4 z-[100002] bg-white rounded-lg shadow-2xl border-l-4 p-4",i.type==="success"?"border-green-500":"border-red-500"])},[e("p",de,d(i.message),1)],2)):v("",!0)]))]))}};export{ce as default};
