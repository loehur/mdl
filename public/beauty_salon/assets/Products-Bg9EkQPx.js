import{_ as F,r as p,j as w,l as I,c as a,a as e,m as $,F as k,p as x,d as _,t as d,w as D,e as j,f as C,v as M,n as P,q as U,o as r,s as q}from"./index-B_ysXbFF.js";const E={class:"max-w-6xl"},K={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},O={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},G={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},R={class:"flex items-start justify-between mb-3"},W={class:"font-bold text-gray-800 text-lg"},J={class:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Y=["onClick"],Q=["onClick"],X={class:"text-2xl font-bold text-pink-600 mb-3"},Z={key:0,class:"space-y-1"},ee={key:1,class:"text-sm text-gray-400 italic"},te={key:2,class:"text-center py-16"},se={key:0,class:"fixed inset-0 z-[100000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm overflow-y-auto"},oe={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl my-8"},re={class:"bg-gradient-to-r from-pink-500 to-fuchsia-600 px-6 py-4"},ae={class:"font-bold text-white text-lg"},ne={key:0,class:"space-y-2 max-h-60 overflow-y-auto border border-gray-200 rounded-lg p-3"},le=["value"],ie={class:"flex-1 text-gray-700"},de={key:1,class:"text-sm text-gray-400 italic border border-gray-200 rounded-lg p-4 text-center"},ue={class:"flex gap-3 pt-4 sticky bottom-0 bg-white"},ce=["disabled"],pe={key:1,class:"fixed inset-0 z-[100001] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},ge={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md"},me={class:"p-6"},fe={class:"text-gray-800 font-semibold text-center"},he={class:"px-6 pb-6 flex gap-3"},ke={key:2,class:"fixed top-4 right-4 z-[100002] animate-fade-in-down"},xe={class:"flex items-center gap-3"},ve={key:0,class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={key:1,class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={class:"font-medium text-gray-800"},we={__name:"Products",setup(_e){const v=p([]),g=p([]),y=p(!0),m=p(!1),f=p(!1),h=p(!1),n=w({id:null,name:"",price:0,work_steps:[]}),i=w({show:!1,productId:null,productName:""}),l=w({show:!1,message:"",type:"success"});function u(o,t="success"){l.message=o,l.type=t,l.show=!0,setTimeout(()=>l.show=!1,3e3)}function S(o){return new Intl.NumberFormat("id-ID").format(o)}function T(o){const t=g.value.find(s=>s.id==o);return t?t.name:"Unknown"}async function L(){try{const t=await(await fetch("/api/Beauty_Salon/WorkStep")).json();t.success&&(g.value=t.data)}catch(o){console.error("Fetch work steps error:",o)}}async function b(){y.value=!0;try{const t=await(await fetch("/api/Beauty_Salon/Products")).json();t.success&&(v.value=t.data)}catch(o){console.error("Fetch products error:",o)}finally{y.value=!1}}function N(){f.value=!1,n.id=null,n.name="",n.price=0,n.work_steps=[],m.value=!0}function H(o){f.value=!0,n.id=o.id,n.name=o.name,n.price=o.price,n.work_steps=Array.isArray(o.work_steps)?[...o.work_steps]:[],m.value=!0}function B(){m.value=!1}async function V(){h.value=!0;try{const o=f.value?`/api/Beauty_Salon/Products/update/${n.id}`:"/api/Beauty_Salon/Products/create",s=await(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,price:n.price,work_steps:n.work_steps})})).json();s.success?(u(s.message,"success"),B(),b()):u(s.message||"Gagal menyimpan","error")}catch{u("Terjadi kesalahan jaringan","error")}finally{h.value=!1}}function z(o){i.productId=o.id,i.productName=o.name,i.show=!0}async function A(){const o=i.productId;i.show=!1;try{const s=await(await fetch(`/api/Beauty_Salon/Products/delete/${o}`,{method:"POST"})).json();s.success?(u(s.message,"success"),b()):u(s.message||"Gagal menghapus","error")}catch{u("Terjadi kesalahan jaringan","error")}}return I(async()=>{await L(),await b()}),(o,t)=>(r(),a("div",E,[e("div",K,[e("div",{class:"flex items-center justify-between mb-6"},[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Produk Layanan",-1)),e("button",{onClick:N,class:"px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transition-all flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"Tambah Produk",-1)])])]),y.value?(r(),a("div",O,[(r(),a(k,null,x(6,s=>e("div",{key:s,class:"bg-gray-50 rounded-lg p-4 animate-pulse"},[...t[6]||(t[6]=[e("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-3"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-3"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-full mb-2"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-2/3"},null,-1)])])),64))])):v.value.length?(r(),a("div",G,[(r(!0),a(k,null,x(v.value,s=>(r(),a("div",{key:s.id,class:"bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 p-5 hover:shadow-lg transition-all group"},[e("div",R,[e("h3",W,d(s.name),1),e("div",J,[e("button",{onClick:c=>H(s),class:"text-blue-600 hover:text-blue-700 p-1",title:"Edit"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Y),e("button",{onClick:c=>z(s),class:"text-red-600 hover:text-red-700 p-1",title:"Hapus"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Q)])]),e("div",X," Rp "+d(S(s.price)),1),s.work_steps&&s.work_steps.length?(r(),a("div",Z,[t[10]||(t[10]=e("div",{class:"text-xs font-medium text-gray-500 uppercase mb-2"},"Langkah Kerja:",-1)),(r(!0),a(k,null,x(s.work_steps,c=>(r(),a("div",{key:c,class:"flex items-center gap-2 text-sm text-gray-600"},[t[9]||(t[9]=e("svg",{class:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,d(T(c)),1)]))),128))])):(r(),a("div",ee,"Belum ada langkah kerja"))]))),128))])):(r(),a("div",te,[...t[11]||(t[11]=[e("svg",{class:"w-20 h-20 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),e("p",{class:"text-gray-500"},"Belum ada produk layanan",-1)])]))]),(r(),$(U,{to:"body"},[m.value?(r(),a("div",se,[e("div",oe,[e("div",re,[e("h3",ae,d(f.value?"Edit Produk":"Tambah Produk"),1)]),e("form",{onSubmit:D(V,["prevent"]),class:"p-6 space-y-4 max-h-[70vh] overflow-y-auto"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Nama Produk "),e("span",{class:"text-red-500"},"*")],-1)),j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.name=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none transition",placeholder:"Contoh: Paket Potong + Cuci"},null,512),[[M,n.name]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Harga (Rp) "),e("span",{class:"text-red-500"},"*")],-1)),j(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.price=s),type:"number",step:"0.01",required:"",min:"0",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none transition",placeholder:"0"},null,512),[[M,n.price]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[C(" Langkah Kerja "),e("span",{class:"text-gray-400 text-xs"},"(Pilih yang sesuai)")],-1)),g.value.length?(r(),a("div",ne,[(r(!0),a(k,null,x(g.value,s=>(r(),a("label",{key:s.id,class:"flex items-center gap-3 p-2 hover:bg-pink-50 rounded-lg cursor-pointer transition"},[j(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[2]||(t[2]=c=>n.work_steps=c),class:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"},null,8,le),[[q,n.work_steps]]),e("span",ie,d(s.name),1)]))),128))])):(r(),a("div",de," Belum ada langkah kerja. Silakan buat terlebih dahulu. "))]),e("div",ue,[e("button",{type:"button",onClick:B,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition"}," Batal "),e("button",{type:"submit",disabled:h.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white rounded-lg font-medium transition disabled:opacity-50"},d(h.value?"Menyimpan...":"Simpan"),9,ce)])],32)])])):_("",!0),i.show?(r(),a("div",pe,[e("div",ge,[t[16]||(t[16]=e("div",{class:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4 flex items-center gap-3"},[e("div",{class:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",null,[e("h3",{class:"font-bold text-white text-lg"},"Konfirmasi Hapus"),e("p",{class:"text-white/80 text-sm"},"Tindakan tidak dapat dibatalkan")])],-1)),e("div",me,[t[15]||(t[15]=e("p",{class:"text-gray-600 text-center mb-2"},"Apakah Anda yakin ingin menghapus produk ini?",-1)),e("p",fe,d(i.productName),1)]),e("div",he,[e("button",{onClick:t[3]||(t[3]=s=>i.show=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition"}," Batal "),e("button",{onClick:A,class:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg hover:from-red-600 hover:to-pink-600 font-medium transition shadow-lg"}," Ya, Hapus ")])])])):_("",!0),l.show?(r(),a("div",ke,[e("div",{class:P(["bg-white rounded-lg shadow-2xl border-l-4 p-4 min-w-[300px]",l.type==="success"?"border-green-500":"border-red-500"])},[e("div",xe,[e("div",{class:P(["w-10 h-10 rounded-full flex items-center justify-center",l.type==="success"?"bg-green-100":"bg-red-100"])},[l.type==="success"?(r(),a("svg",ve,[...t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(r(),a("svg",ye,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2),e("p",be,d(l.message),1)])],2)])):_("",!0)]))]))}},Ce=F(we,[["__scopeId","data-v-8670de71"]]);export{Ce as default};
