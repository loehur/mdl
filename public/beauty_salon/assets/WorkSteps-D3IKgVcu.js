import{_ as F,r as h,j,k as L,l as W,c as n,a as e,m as A,d as u,F as y,p as k,t as l,w as R,e as T,f as N,v as H,n as V,q as D,o as a}from"./index-B_ysXbFF.js";const E={class:"max-w-5xl"},O={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},q={class:"flex items-center justify-between mb-6"},G={class:"hidden md:block overflow-x-auto"},J={class:"w-full text-left text-sm"},K={class:"bg-gradient-to-r from-fuchsia-50 to-pink-50 text-gray-700 font-semibold border-b border-gray-200"},P={key:0,class:"px-4 py-3 text-right"},U={class:"divide-y divide-gray-50"},Y={key:0,class:"px-4 py-3"},Q={class:"px-4 py-3 text-gray-500"},X={class:"px-4 py-3 font-medium text-gray-800"},Z={key:0,class:"px-4 py-3 text-right font-mono text-gray-600"},ee={class:"px-4 py-3 text-right"},te={class:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},se=["onClick"],oe=["onClick"],ae={key:2},ne=["colspan"],re={class:"md:hidden space-y-3"},le={class:"flex items-start justify-between mb-2"},ie={class:"flex-1"},de={class:"text-xs text-gray-500 mb-1"},ue={class:"font-medium text-gray-800"},ce={key:0,class:"text-sm text-gray-600 font-mono mb-3"},pe={class:"flex gap-2"},me=["onClick"],he=["onClick"],fe={key:2,class:"text-center py-12 text-gray-400"},ge={key:0,class:"fixed inset-0 z-[100000] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},xe={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"},ve={class:"bg-gradient-to-r from-pink-500 to-fuchsia-600 px-6 py-4"},ye={class:"font-bold text-white text-lg"},ke={key:0},be={class:"flex gap-3 pt-4"},we=["disabled"],_e={key:1,class:"fixed inset-0 z-[100001] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},je={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"},Ce={class:"p-6"},Se={class:"text-gray-800 font-semibold text-center"},Me={class:"px-6 pb-6 flex gap-3"},Be={key:2,class:"fixed top-4 right-4 z-[100002] animate-fade-in-down"},Le={class:"flex items-center gap-3"},Te={key:0,class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ne={key:1,class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={class:"font-medium text-gray-800"},Ve={__name:"WorkSteps",setup($e){const m=h([]),f=h(!0),g=h(!1),x=h(!1),v=h(!1),r=j({id:null,name:"",fee:0}),d=j({show:!1,stepId:null,stepName:""}),i=j({show:!1,message:"",type:"success"}),$=L(()=>{try{const o=JSON.parse(localStorage.getItem("salon_user"));return(o==null?void 0:o.role)||"cashier"}catch{return"cashier"}}),c=L(()=>$.value==="admin");function p(o,t="success"){i.message=o,i.type=t,i.show=!0,setTimeout(()=>{i.show=!1},3e3)}function C(o){return new Intl.NumberFormat("id-ID").format(o)}async function b(){f.value=!0;try{const t=await(await fetch("/api/Beauty_Salon/WorkStep")).json();t.success&&(m.value=t.data)}catch(o){console.error("Fetch steps error:",o)}finally{f.value=!1}}function S(o){x.value=!0,r.id=o.id,r.name=o.name,r.fee=o.fee,g.value=!0}function M(){g.value=!1,x.value=!1,r.id=null,r.name="",r.fee=0}async function I(){v.value=!0;try{const o=x.value?`/api/Beauty_Salon/WorkStep/update/${r.id}`:"/api/Beauty_Salon/WorkStep/create",s=await(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,fee:r.fee})})).json();s.success?(p(s.message,"success"),M(),b()):p(s.message||"Gagal menyimpan","error")}catch{p("Terjadi kesalahan jaringan","error")}finally{v.value=!1}}function B(o){d.stepId=o.id,d.stepName=o.name,d.show=!0}async function z(){const o=d.stepId;d.show=!1;try{const s=await(await fetch(`/api/Beauty_Salon/WorkStep/delete/${o}`,{method:"POST"})).json();s.success?(p(s.message,"success"),b()):p(s.message||"Gagal menghapus","error")}catch{p("Terjadi kesalahan jaringan","error")}}return W(()=>{b()}),(o,t)=>(a(),n("div",E,[e("div",O,[e("div",q,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Langkah Kerja",-1)),e("button",{onClick:t[0]||(t[0]=s=>g.value=!0),class:"px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transition-all flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"Tambah Langkah",-1)])])]),e("div",G,[e("table",J,[e("thead",K,[e("tr",null,[t[6]||(t[6]=e("th",{class:"px-4 py-3 w-16"},"#",-1)),t[7]||(t[7]=e("th",{class:"px-4 py-3"},"Nama Langkah",-1)),c.value?(a(),n("th",P,"Fee")):u("",!0),t[8]||(t[8]=e("th",{class:"px-4 py-3 text-right w-32"},"Aksi",-1))])]),e("tbody",U,[f.value?(a(),n(y,{key:0},k(3,s=>e("tr",{key:s,class:"animate-pulse"},[t[10]||(t[10]=e("td",{class:"px-4 py-3"},[e("div",{class:"h-4 bg-gray-200 rounded w-8"})],-1)),t[11]||(t[11]=e("td",{class:"px-4 py-3"},[e("div",{class:"h-4 bg-gray-200 rounded w-48"})],-1)),c.value?(a(),n("td",Y,[...t[9]||(t[9]=[e("div",{class:"h-4 bg-gray-200 rounded w-24 ml-auto"},null,-1)])])):u("",!0),t[12]||(t[12]=e("td",{class:"px-4 py-3"},null,-1))])),64)):m.value.length?(a(!0),n(y,{key:1},k(m.value,(s,w)=>(a(),n("tr",{key:s.id,class:"hover:bg-fuchsia-50/30 transition group"},[e("td",Q,l(w+1),1),e("td",X,l(s.name),1),c.value?(a(),n("td",Z," Rp "+l(C(s.fee)),1)):u("",!0),e("td",ee,[e("div",te,[e("button",{onClick:_=>S(s),class:"text-blue-600 hover:text-blue-700 p-1",title:"Edit"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,se),e("button",{onClick:_=>B(s),class:"text-red-600 hover:text-red-700 p-1",title:"Hapus"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,oe)])])]))),128)):(a(),n("tr",ae,[e("td",{colspan:c.value?4:3,class:"px-4 py-12 text-center"},[...t[15]||(t[15]=[e("div",{class:"flex flex-col items-center gap-3 text-gray-400"},[e("svg",{class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-sm font-medium"},"Belum ada langkah kerja")],-1)])],8,ne)]))])])]),e("div",re,[f.value?(a(),n(y,{key:0},k(3,s=>e("div",{key:s,class:"bg-gray-50 rounded-lg p-4 animate-pulse"},[...t[16]||(t[16]=[e("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-2"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-1/2"},null,-1)])])),64)):m.value.length?(a(!0),n(y,{key:1},k(m.value,(s,w)=>(a(),n("div",{key:s.id,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},[e("div",le,[e("div",ie,[e("div",de,"Langkah #"+l(w+1),1),e("div",ue,l(s.name),1)])]),c.value?(a(),n("div",ce," Rp "+l(C(s.fee)),1)):u("",!0),e("div",pe,[e("button",{onClick:_=>S(s),class:"flex-1 py-2 border border-blue-200 text-blue-600 rounded-lg text-sm font-medium hover:bg-blue-50 transition"}," Edit ",8,me),e("button",{onClick:_=>B(s),class:"flex-1 py-2 border border-red-200 text-red-600 rounded-lg text-sm font-medium hover:bg-red-50 transition"}," Hapus ",8,he)])]))),128)):(a(),n("div",fe,[...t[17]||(t[17]=[e("svg",{class:"w-16 h-16 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("p",{class:"text-sm"},"Belum ada langkah kerja",-1)])]))])]),(a(),A(D,{to:"body"},[g.value?(a(),n("div",ge,[e("div",xe,[e("div",ve,[e("h3",ye,l(x.value?"Edit Langkah":"Tambah Langkah"),1)]),e("form",{onSubmit:R(I,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Nama Langkah "),e("span",{class:"text-red-500"},"*")],-1)),T(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.name=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none transition",placeholder:"Contoh: Cuci Rambut"},null,512),[[H,r.name]])]),c.value?(a(),n("div",ke,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[N(" Fee (Rp) "),e("span",{class:"text-red-500"},"*")],-1)),T(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.fee=s),type:"number",step:"0.01",required:"",min:"0",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-200 focus:border-pink-400 outline-none transition",placeholder:"0"},null,512),[[H,r.fee]])])):u("",!0),e("div",be,[e("button",{type:"button",onClick:M,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition"}," Batal "),e("button",{type:"submit",disabled:v.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white rounded-lg font-medium transition disabled:opacity-50"},l(v.value?"Menyimpan...":"Simpan"),9,we)])],32)])])):u("",!0),d.show?(a(),n("div",_e,[e("div",je,[t[21]||(t[21]=e("div",{class:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4 flex items-center gap-3"},[e("div",{class:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",null,[e("h3",{class:"font-bold text-white text-lg"},"Konfirmasi Hapus"),e("p",{class:"text-white/80 text-sm"},"Tindakan ini tidak dapat dibatalkan")])],-1)),e("div",Ce,[t[20]||(t[20]=e("p",{class:"text-gray-600 text-center mb-2"},"Apakah Anda yakin ingin menghapus langkah ini?",-1)),e("p",Se,l(d.stepName),1)]),e("div",Me,[e("button",{onClick:t[3]||(t[3]=s=>d.show=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition"}," Batal "),e("button",{onClick:z,class:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg hover:from-red-600 hover:to-pink-600 font-medium transition shadow-lg"}," Ya, Hapus ")])])])):u("",!0),i.show?(a(),n("div",Be,[e("div",{class:V(["bg-white rounded-lg shadow-2xl border-l-4 p-4 min-w-[300px]",i.type==="success"?"border-green-500":"border-red-500"])},[e("div",Le,[e("div",{class:V(["w-10 h-10 rounded-full flex items-center justify-center",i.type==="success"?"bg-green-100":"bg-red-100"])},[i.type==="success"?(a(),n("svg",Te,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(a(),n("svg",Ne,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2),e("p",He,l(i.message),1)])],2)])):u("",!0)]))]))}},ze=F(Ve,[["__scopeId","data-v-b66b9799"]]);export{ze as default};
