import{r as x,l as h,c as l,a as t,m as b,b as w,F as y,p as _,d as c,w as k,t as s,q as D,o,n as T,f as j}from"./index-jKCXayeo.js";const N={class:"max-w-7xl mx-auto space-y-6"},B={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},C={key:0,class:"p-8 text-center text-gray-500"},M={key:1,class:"p-12 text-center"},O={key:2,class:"overflow-x-auto"},S={class:"w-full text-left text-sm"},I={class:"divide-y divide-gray-50"},R={class:"px-6 py-4 font-mono text-gray-500"},V={class:"px-6 py-4 text-gray-700"},L={class:"text-xs text-gray-400"},z={class:"px-6 py-4"},A={class:"font-medium text-gray-900"},F={class:"text-xs text-gray-500"},P={class:"px-6 py-4 text-gray-600 max-w-xs truncate"},$={class:"px-6 py-4 font-bold text-gray-800"},q={class:"px-6 py-4"},E={class:"flex flex-col gap-1"},W={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 w-fit"},G={key:2,class:"text-xs text-gray-500 italic truncate max-w-[150px]"},H={class:"px-6 py-4 text-right"},J=["onClick"],K={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]"},Q={class:"px-6 py-4 bg-gray-50 border-b border-gray-100 flex justify-between items-center"},U={class:"font-bold text-lg text-gray-800"},X={class:"p-6 overflow-y-auto space-y-4"},Y={class:"flex justify-between items-start"},Z={class:"font-medium text-lg"},tt={class:"text-sm text-gray-500"},et={class:"text-right"},st={class:"font-medium"},at={class:"text-xs text-gray-500"},nt={class:"space-y-3"},ot={class:"font-medium"},lt={class:"text-xs text-gray-500 ml-2"},it={key:0,class:"text-gray-400"},dt={class:"font-medium"},rt={class:"bg-gray-50 p-4 rounded-xl space-y-2 text-sm"},ct={class:"flex justify-between font-bold text-gray-800 text-lg"},ut={class:"flex justify-between text-gray-600"},pt={class:"capitalize"},xt={key:0,class:"text-xs text-gray-500 flex justify-between border-t border-gray-200 pt-1 mt-1"},yt={key:1,class:"text-gray-500 italic pt-1"},gt={__name:"ArchiveOrders",setup(_t){const m=x(!0),p=x([]),n=x(null);h(async()=>{try{const e=await(await fetch("/api/Beauty_Salon/Orders?status=completed")).json();e.success&&(p.value=e.data)}catch(i){console.error(i)}finally{m.value=!1}});function f(i){n.value=i}function d(i){return new Intl.NumberFormat("id-ID").format(i||0)}function g(i){return i?new Date(i).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-"}function v(i){return i?new Date(i).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):""}return(i,e)=>(o(),l("div",N,[e[11]||(e[11]=t("div",{class:"bg-white rounded-xl shadow-sm border border-gray-100 px-6 py-4 flex items-center justify-between"},[t("div",null,[t("h2",{class:"text-lg font-bold text-gray-800"},"Arsip Order Selesai"),t("p",{class:"text-sm text-gray-500"},"Riwayat transaksi yang telah diselesaikan")]),t("div",{class:"flex gap-2"})],-1)),t("div",B,[m.value?(o(),l("div",C,"Memuat arsip...")):p.value.length===0?(o(),l("div",M,[...e[2]||(e[2]=[w('<div class="inline-block p-4 rounded-full bg-gray-50 mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg></div><h3 class="text-lg font-medium text-gray-900">Belum ada arsip</h3><p class="text-gray-500">Order yang diselesaikan akan muncul di sini.</p>',3)])])):(o(),l("div",O,[t("table",S,[e[3]||(e[3]=t("thead",{class:"bg-gray-50 border-b border-gray-100 text-gray-500 uppercase tracking-wider text-xs"},[t("tr",null,[t("th",{class:"px-6 py-4 font-semibold"},"Order ID"),t("th",{class:"px-6 py-4 font-semibold"},"Tanggal Selesai"),t("th",{class:"px-6 py-4 font-semibold"},"Pelanggan"),t("th",{class:"px-6 py-4 font-semibold"},"Layanan"),t("th",{class:"px-6 py-4 font-semibold"},"Total"),t("th",{class:"px-6 py-4 font-semibold"},"Pembayaran"),t("th",{class:"px-6 py-4 font-semibold text-right"},"Aksi")])],-1)),t("tbody",I,[(o(!0),l(y,null,_(p.value,a=>(o(),l("tr",{key:a.id,class:"hover:bg-gray-50/50 transition"},[t("td",R,"#"+s(a.id),1),t("td",V,[t("div",null,s(g(a.completed_at||a.updated_at)),1),t("div",L,s(v(a.completed_at||a.updated_at)),1)]),t("td",z,[t("div",A,s(a.customer_name),1),t("div",F,s(a.customer_phone),1)]),t("td",P,s(a.order_items.map(u=>u.product_name).join(", ")),1),t("td",$," Rp "+s(d(a.total_price)),1),t("td",q,[t("div",E,[a.payment_method==="split"?(o(),l("span",W," Split (T: "+s(d(a.pay_cash))+" / N: "+s(d(a.pay_non_cash))+") ",1)):(o(),l("span",{key:1,class:T(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium w-fit",a.payment_method==="non_tunai"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},s(a.payment_method==="non_tunai"?"Non Tunai":"Tunai"),3)),a.payment_notes?(o(),l("span",G,s(a.payment_notes),1)):c("",!0)])]),t("td",H,[t("button",{onClick:u=>f(a),class:"text-pink-600 hover:text-pink-800 font-medium text-xs"},"Detail",8,J)])]))),128))])])]))]),(o(),b(D,{to:"body"},[n.value?(o(),l("div",{key:0,class:"fixed inset-0 z-[1001] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:e[1]||(e[1]=k(a=>n.value=null,["self"]))},[t("div",K,[t("div",Q,[t("h3",U,"Detail Order #"+s(n.value.id),1),t("button",{onClick:e[0]||(e[0]=a=>n.value=null),class:"text-gray-400 hover:text-gray-600"},"✕")]),t("div",X,[t("div",Y,[t("div",null,[e[4]||(e[4]=t("div",{class:"text-xs text-gray-500 uppercase font-bold"},"Pelanggan",-1)),t("div",Z,s(n.value.customer_name),1),t("div",tt,s(n.value.customer_phone),1)]),t("div",et,[e[5]||(e[5]=t("div",{class:"text-xs text-gray-500 uppercase font-bold"},"Tanggal",-1)),t("div",st,s(g(n.value.completed_at||n.value.updated_at)),1),t("div",at,s(v(n.value.completed_at||n.value.updated_at)),1)])]),e[9]||(e[9]=t("hr",{class:"border-gray-100"},null,-1)),t("div",nt,[(o(!0),l(y,null,_(n.value.order_items,(a,u)=>(o(),l("div",{key:u,class:"flex justify-between"},[t("div",null,[t("div",ot,s(a.product_name),1),t("div",lt,[(o(!0),l(y,null,_(a.work_steps,r=>(o(),l("div",{key:r.step_id||r.id},[j(" • "+s(r.name||r.step_name)+" ",1),r.worker_id?(o(),l("span",it,"(Worker #"+s(r.worker_id)+")",1)):c("",!0)]))),128))])]),t("div",dt,"Rp "+s(d(a.price)),1)]))),128))]),e[10]||(e[10]=t("hr",{class:"border-gray-100 border-dashed"},null,-1)),t("div",rt,[t("div",ct,[e[6]||(e[6]=t("span",null,"Total",-1)),t("span",null,"Rp "+s(d(n.value.total_price)),1)]),t("div",ut,[e[7]||(e[7]=t("span",null,"Metode Bayar",-1)),t("span",pt,s((n.value.payment_method||"-").replace("_"," ")),1)]),n.value.payment_method==="split"?(o(),l("div",xt,[e[8]||(e[8]=t("span",null,"Rincian Split",-1)),t("span",null,"Tunai: "+s(d(n.value.pay_cash))+" | Non: "+s(d(n.value.pay_non_cash)),1)])):c("",!0),n.value.payment_notes?(o(),l("div",yt,' "'+s(n.value.payment_notes)+'" ',1)):c("",!0)])])])])):c("",!0)]))]))}};export{gt as default};
