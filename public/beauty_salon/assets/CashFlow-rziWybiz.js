import{r as x,j as I,l as M,c as d,a as t,e as v,v as k,t as o,d as F,F as B,p as V,o as l,n as L}from"./index-CpgNnZR1.js";const N={class:"max-w-7xl mx-auto space-y-6"},j={class:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100"},z={class:"flex items-center gap-2"},O={class:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden"},U={class:"relative z-10"},E={class:"text-4xl font-bold tracking-tight"},K={class:"text-sm text-emerald-100 mt-2 opacity-90"},P={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},R={class:"border-b border-gray-100 px-6 py-4 flex items-center justify-between"},A={class:"text-xs font-medium bg-gray-100 text-gray-600 px-2 py-1 rounded-lg"},H={class:"overflow-x-auto"},W={class:"w-full text-left text-sm border-collapse"},Y={class:"divide-y divide-gray-50"},q={key:0,class:"animate-pulse"},G={key:1},J={class:"px-6 py-3 whitespace-nowrap text-gray-600 font-mono text-xs"},Q={class:"px-6 py-3 font-medium text-gray-800"},X={class:"px-6 py-3 text-gray-700"},Z={class:"px-6 py-3"},$={class:"px-6 py-3 text-right font-bold text-emerald-600"},at={__name:"CashFlow",setup(tt){const u=x(!0),c=x([]),y=x(0),p=new Date,T=new Date(p.getFullYear(),p.getMonth(),1),g=s=>s.toISOString().split("T")[0],n=I({startDate:g(T),endDate:g(p)});async function f(){u.value=!0;try{const e=await(await fetch("/api/Beauty_Salon/Orders")).json();e.success&&S(e.data)}catch(s){console.error(s)}finally{u.value=!1}}function S(s){const e=new Date(n.startDate),a=new Date(n.endDate);a.setHours(23,59,59);let D=0;const m=[];s.forEach(r=>{if(r.status!=="completed")return;const i=r.order_date||r.created_at;if(!i)return;const w=new Date(i);if(w<e||w>a)return;const b=Number(r.pay_cash)||0;b>0&&(D+=b,m.push(r))}),m.sort((r,i)=>new Date(i.order_date||i.created_at)-new Date(r.order_date||r.created_at)),y.value=D,c.value=m}function h(s){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)}function _(s){return new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}function C(s){if(!s)return"-";const e=new Date(s);return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})+" "+e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}return M(()=>{f()}),(s,e)=>(l(),d("div",N,[t("div",j,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-800"},"Laporan Kas"),t("p",{class:"text-sm text-gray-500"},"Saldo tunai dari pesanan selesai")],-1)),t("div",z,[v(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>n.startDate=a),class:"border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-pink-200"},null,512),[[k,n.startDate]]),e[2]||(e[2]=t("span",{class:"text-gray-400"},"-",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>n.endDate=a),class:"border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-pink-200"},null,512),[[k,n.endDate]]),t("button",{onClick:f,class:"bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition shadow-lg shadow-pink-200"}," Filter ")])]),t("div",O,[e[5]||(e[5]=t("div",{class:"absolute top-0 right-0 p-8 opacity-10 transform translate-x-1/2 -translate-y-1/2"},[t("svg",{class:"w-64 h-64",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.15-1.46-3.27-3.4h1.96c.1 1.05 1.18 1.91 2.53 1.91 1.29 0 2.13-.77 2.13-2.11 0-2.85-6-1.62-6-5.5 0-1.68 1.17-2.91 2.87-3.29V4h2.67v1.82c1.71.43 2.91 1.62 3.03 3.12h-1.95c-.15-.98-.94-1.63-2.03-1.63-1.07 0-1.94.72-1.94 1.83 0 2.54 6.02 1.55 6.02 5.54 0 1.96-1.33 3.32-3.35 3.69z"})])],-1)),t("div",U,[e[4]||(e[4]=t("p",{class:"text-emerald-100 font-medium mb-1"},"Total Saldo Kas (Tunai)",-1)),t("h2",E,o(h(y.value)),1),t("p",K,"Periode: "+o(_(n.startDate))+" s/d "+o(_(n.endDate)),1)])]),t("div",P,[t("div",R,[e[6]||(e[6]=t("h3",{class:"font-bold text-gray-800"},"Riwayat Transaksi Masuk",-1)),t("span",A,o(c.value.length)+" Transaksi",1)]),t("div",H,[t("table",W,[e[9]||(e[9]=t("thead",{class:"bg-gray-50 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b"},[t("tr",null,[t("th",{class:"px-6 py-4"},"Tanggal & Waktu"),t("th",{class:"px-6 py-4"},"Order ID"),t("th",{class:"px-6 py-4"},"Pelanggan"),t("th",{class:"px-6 py-4"},"Metode Bayar"),t("th",{class:"px-6 py-4 text-right"},"Nominal Masuk (Tunai)")])],-1)),t("tbody",Y,[u.value?(l(),d("tr",q,[...e[7]||(e[7]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"Memuat data...",-1)])])):c.value.length===0?(l(),d("tr",G,[...e[8]||(e[8]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"Tidak ada transaksi tunai pada periode ini",-1)])])):F("",!0),(l(!0),d(B,null,V(c.value,a=>(l(),d("tr",{key:a.id,class:"hover:bg-gray-50 transition duration-150"},[t("td",J,o(C(a.order_date||a.created_at)),1),t("td",Q," #"+o(a.id),1),t("td",X,o(a.customer_name),1),t("td",Z,[t("span",{class:L(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",a.payment_method==="tunai"?"bg-emerald-100 text-emerald-800":"bg-orange-100 text-orange-800"])},o((a.payment_method||"Tunai").toUpperCase()),3)]),t("td",$," + "+o(h(a.pay_cash)),1)]))),128))])])])])]))}};export{at as default};
