import{_,r as i,c as r,a as t,b as M,d as p,g as m,w as k,e as x,v as g,t as b,h as w,f as h,T as z,i as B,u as S,o as n,n as T}from"./index-BoQgraaV.js";const V={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-100 via-pink-50 to-fuchsia-100 relative overflow-hidden"},N={class:"w-full max-w-md px-6 py-8 relative z-10 font-sans"},O={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/50"},K={key:0},A={class:"relative group"},H=["disabled"],q={key:0,class:"h-5 w-5 animate-spin relative z-10",viewBox:"0 0 24 24",fill:"none"},L={class:"relative z-10"},D={key:1},G={class:"text-center mb-6"},R={class:"text-xs text-gray-500 font-medium leading-relaxed"},U={class:"font-bold text-pink-600 tracking-wider"},E=["disabled"],F={key:0,class:"h-5 w-5 animate-spin relative z-10",viewBox:"0 0 24 24",fill:"none"},J={class:"relative z-10 font-bold uppercase tracking-widest text-xs pt-0.5"},I={key:0,class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$={__name:"ForgotPassword",setup(Q){const y=S(),d=i(""),c=i(""),f=i(""),v=i(1),a=i(""),s=i(!1),o=i(!1);async function C(){a.value="",s.value=!0,o.value=!1;try{const l=await fetch("/api/Beauty_Salon/Auth/forgot_password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone_number:d.value})}),e=await l.json().catch(()=>({success:!1}));if(!l.ok||!e.success){a.value=e.message||"Gagal mengirim OTP",o.value=!0,s.value=!1;return}c.value="",v.value=2,a.value=e.message,s.value=!1}catch{a.value="Kesalahan jaringan",o.value=!0,s.value=!1}}async function j(){a.value="",s.value=!0,o.value=!1;try{const l=await fetch("/api/Beauty_Salon/Auth/reset_password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone_number:d.value,otp:c.value,new_password:f.value})}),e=await l.json().catch(()=>({success:!1}));if(!l.ok||!e.success){a.value=e.message||"Gagal mereset password",o.value=!0,s.value=!1;return}a.value="Password berhasil diubah secara aman. Mengalihkan...",setTimeout(()=>{y.push("/login")},2e3)}catch{a.value="Kesalahan jaringan",o.value=!0,s.value=!1}}return(l,e)=>{const P=B("router-link");return n(),r("div",V,[e[21]||(e[21]=t("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[t("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300/30 rounded-full blur-3xl"}),t("div",{class:"absolute -bottom-40 -left-40 w-96 h-96 bg-fuchsia-300/30 rounded-full blur-3xl"})],-1)),t("div",N,[e[19]||(e[19]=M('<div class="text-center mb-8" data-v-a61b20c6><div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-fuchsia-600 shadow-xl mb-4" data-v-a61b20c6><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-a61b20c6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-a61b20c6></path></svg></div><h1 class="text-3xl font-black bg-gradient-to-r from-pink-600 to-fuchsia-600 bg-clip-text text-transparent mb-1" data-v-a61b20c6>Reset Password</h1><p class="text-gray-500 text-sm font-medium" data-v-a61b20c6>Pulihkan akses akun Anda</p></div>',1)),t("div",O,[v.value===1?(n(),r("div",K,[e[9]||(e[9]=t("h2",{class:"text-xl font-black text-gray-800 mb-6 tracking-tight"},"Cari Nomor HP",-1)),t("form",{class:"space-y-5",onSubmit:k(C,["prevent"])},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1"},"Nomor WhatsApp",-1)),t("div",A,[e[4]||(e[4]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none transition-colors group-focus-within:text-pink-500"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>d.value=u),class:"w-full pl-12 pr-4 py-4 border border-gray-100 rounded-2xl focus:ring-4 focus:ring-pink-500/10 focus:border-pink-500 outline-none transition-all bg-white/50 font-semibold",type:"text",inputmode:"numeric",placeholder:"Contoh: 08123456789",required:""},null,512),[[g,d.value]])])]),t("button",{class:"w-full py-4 rounded-2xl bg-slate-900 group hover:bg-slate-800 text-white font-black text-xs uppercase tracking-[0.2em] shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden",type:"submit",disabled:s.value},[e[7]||(e[7]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),s.value?(n(),r("svg",q,[...e[6]||(e[6]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):p("",!0),t("span",L,b(s.value?"Mengirim...":"Kirim Kode OTP"),1)],8,H),m(P,{to:"/login",class:"block text-center text-xs font-bold text-gray-400 hover:text-gray-600 transition pt-2"},{default:w(()=>[...e[8]||(e[8]=[h("← Kembali ke Login",-1)])]),_:1})],32)])):p("",!0),v.value===2?(n(),r("div",D,[t("div",G,[e[12]||(e[12]=t("h2",{class:"text-xl font-black text-gray-800 mb-2 tracking-tight"},"Verifikasi & Reset",-1)),t("p",R,[e[10]||(e[10]=h("Masukkan kode OTP yang dikirim ke",-1)),e[11]||(e[11]=t("br",null,null,-1)),t("span",U,b(d.value),1)])]),t("form",{class:"space-y-4",onSubmit:k(j,["prevent"])},[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1"},"Kode OTP (6 Digit)",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>c.value=u),autocomplete:"one-time-code",class:"w-full px-4 py-4 border border-gray-100 rounded-2x text-center text-2xl tracking-[0.3em] font-mono focus:ring-4 focus:ring-pink-500/10 focus:border-pink-500 outline-none transition-all bg-white/50 font-black placeholder:text-gray-200",type:"text",maxlength:"6",placeholder:"      ",required:""},null,512),[[g,c.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1"},"Password Baru (Min. 6 Karakter)",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>f.value=u),class:"w-full px-4 py-4 border border-gray-100 rounded-2xl focus:ring-4 focus:ring-pink-500/10 focus:border-pink-500 outline-none transition-all bg-white/50 font-semibold",type:"password",placeholder:"••••••••",required:"",minlength:"6"},null,512),[[g,f.value]])]),t("button",{class:"w-full py-4 rounded-2xl bg-slate-900 group hover:bg-slate-800 text-white font-black text-xs uppercase tracking-[0.2em] shadow-xl transition-all disabled:opacity-50 flex items-center justify-center gap-3 relative overflow-hidden",type:"submit",disabled:s.value},[e[16]||(e[16]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),s.value?(n(),r("svg",F,[...e[15]||(e[15]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):p("",!0),t("span",J,b(s.value?"Memproses...":"Simpan & Masuk"),1)],8,E),t("button",{type:"button",onClick:e[3]||(e[3]=u=>v.value=1),class:"w-full text-xs font-bold text-gray-400 hover:text-pink-600 transition mt-4"},"Ganti Nomor HP")],32)])):p("",!0),m(z,{name:"fade"},{default:w(()=>[a.value?(n(),r("div",{key:0,class:T(["mt-8 p-4 rounded-2xl text-xs font-bold flex items-center gap-3",o.value?"bg-red-50 text-red-600 border border-red-100":"bg-emerald-50 text-emerald-600 border border-emerald-100"])},[o.value?(n(),r("svg",I,[...e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):(n(),r("svg",W,[...e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),t("span",null,b(a.value),1)],2)):p("",!0)]),_:1})]),e[20]||(e[20]=t("p",{class:"text-center text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-12"},"© 2024 Beauty Salon. Cloud Secured.",-1))])])}}},Y=_($,[["__scopeId","data-v-a61b20c6"]]);export{Y as default};
